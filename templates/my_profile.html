<!-- my_profile.html -->

<!DOCTYPE html>
<html>
<head>
    <title>My Profile</title>
    <style>
      .profile-pic {
        width: 120px;
        height: 120px;
        object-fit: cover;
        border: 2px solid #ccc;
        border-radius: 50%;
      }
    </style>
</head>
<body>
    <h2>My Profile</h2>

    <div>
      {% if profile_pic_b64 %}
        <img class="profile-pic" src="data:image/jpeg;base64,{{ profile_pic_b64 }}" alt="Profile Picture">
      {% else %}
        <!-- default pic -->
        <img class="profile-pic" src="/static/default_profile.png" alt="Default Picture">
      {% endif %}
    </div>

    <form method="POST" enctype="multipart/form-data">
      <p><strong>Email:</strong> {{ email }}</p>

      <label>First Name:</label>
      <input type="text" name="first_name" value="{{ first_name }}"><br><br>

      <label>Last Name:</label>
      <input type="text" name="last_name" value="{{ last_name }}"><br><br>

      <label>Phone:</label>
      <input type="text" name="phone" value="{{ phone }}"><br><br>

      <hr>
      <p><em>If you want to change your password, fill these fields:</em></p>
      <label>New Password:</label>
      <input type="password" name="new_password"><br><br>

      <label>Confirm Password:</label>
      <input type="password" name="confirm_password"><br><br>

      <hr>
      <label>Profile Picture:</label>
      <input type="file" name="profile_pic" accept="image/*"><br><br>

      <button type="submit">Update Profile</button>
    </form>

    <p><a href="{{ url_for('user_bp.user_home2') }}">Back to Home</a></p>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul>
          {% for msg in messages %}
            <li>{{ msg }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
</body>
</html>
